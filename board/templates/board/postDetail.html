{% extends "./base.html" %}

{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <div class="container">
        <!-- 1. 포스트 내용 -->
        <h1>{{ post.title }}</h1>
        
        <div class="metadata">
            <span>작성일: {{ post.created_at|date:"Y년 m월 d일 H:i" }}</span>
        </div>

        <div class="content">
            {{ post.content|linebreaksbr }}
        </div>

        <!-- 2. 액션 버튼 (수정, 삭제, 목록으로) -->
        <div class="actions">
            
{% comment %}             
            <!-- 수정 링크 (URLs 설정에 따라 별칭을 'post:update' 등으로 사용) -->
            <a href="{% url 'post:update' post.id %}" class="edit-btn">수정하기</a>

            <!-- 삭제 폼: POST 요청 사용 및 CSRF 토큰 필수 -->
            <form method="POST" action="{% url 'post:delete' post.id %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="delete-btn" onclick="return confirm('정말로 이 포스트를 삭제하시겠습니까?');">삭제하기</button>
            </form> {% endcomment %}

            <!-- 목록으로 돌아가기 -->
            <a href="{% url 'post:list' %}" class="list-btn">목록으로</a>
        </div>
        
        <!-- 3. 댓글 섹션 (선택 사항) -->
        <div class="comments-section">
            <h2>댓글</h2>
            
            {% if comments %}
                {% for comment in comments %}
                    <div class="comment">
                        <div class="comment-author">익명 사용자</div>
                        <div class="comment-text">{{ comment.comment_text|linebreaksbr }}</div>
                    </div>
                {% endfor %}
            {% else %}
                <p>아직 댓글이 없습니다.</p>
            {% endif %}
            
            <!-- 댓글 작성 폼은 여기에 추가됩니다. -->
        </div>

    </div>
    </div>
{% endblock %}